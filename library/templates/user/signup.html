{% extends 'base.html' %}

{% block title %}Регистрация{% endblock %}

{% block content %}
<h2 class="text-center">Регистрация</h2>
<form method="post" action="{% url 'user:signup' %}">
    {% csrf_token %}
    <div class="form-group">
        <label for="first_name">Имя</label>
        <input type="text" name="first_name" id="first_name" class="form-control" />
    </div>
    <div class="form-group">
        <label for="last_name">Фамилия</label>
        <input type="text" name="last_name" id="last_name" class="form-control" />
    </div>
    <div class="form-group">
        <label for="username">Никнейм</label>
        <input type="text" name="username" id="username" class="form-control" />
    </div>
    <div class="form-group">
        <label for="role">Роль</label>
        <select name="role" id="role" class="form-control">
            <option value="Читатель">Читатель</option>
            <option value="Библиотекарь">Библиотекарь</option>
        </select>
    </div>
    <div class="form-group" id="address-field">
        <label for="address">Адрес</label>
        <input type="text" name="address" id="address" class="form-control" />
        <small class="form-text text-muted">Обязательное поле для читателя.</small>
    </div>
    <div class="form-group">
        <label for="password1">Пароль</label>
        <input type="password" name="password1" id="password1" class="form-control" />
    </div>
    <div class="form-group">
        <label for="password2">Подтверждение пароля</label>
        <input type="password" name="password2" id="password2" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary btn-block">Зарегистрироваться</button>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var roleField = document.getElementById('role');
        var addressField = document.getElementById('address-field');

        function toggleAddressField() {
            if (roleField.value === 'Читатель') {
                addressField.style.display = 'block';
            } else {
                addressField.style.display = 'none';
            }
        }

        roleField.addEventListener('change', toggleAddressField);

        // Initial check
        toggleAddressField();
    });
</script>
{% endblock %}